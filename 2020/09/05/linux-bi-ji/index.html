<!DOCTYPE HTML>
<html lang="zh-CN">


<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta name="keywords" content="Linux 学习笔记, python golang k8s 算法 mongo elasticsearch">
    <meta name="baidu-site-verification" content="fmlEuI34ir">
    <meta name="google-site-verification" content="yCy2azpds5XSuGZvis6OuA-XIGF5GuGpYRAaGfD6o48">
    <meta name="360-site-verification" content="b7c11a830ef90fd1464ad6206bb7b6e7">
    <meta name="description" content="Linux笔记
基础命令
创建多个嵌套目录
mkdir -p a/b/c

查看嵌套目录
ls -R ./
ls -h会显示文件的大小

复制文件保留元信息（复制文件默认会修改文件的元信息）
cp -a a b

通配符，只匹配一个字符
l">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Linux 学习笔记 | 鱼丸粗面的博客</title>
    <link rel="icon" type="image/jpeg" href="/laoban.jpeg">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    <style type="text/css">
        
    </style>

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
    <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?46e79e71af0709a5b9106bf20cecc493";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

    
        <script>
            (function(){
                var bp = document.createElement('script');
                var curProtocol = window.location.protocol.split(':')[0];
                if (curProtocol === 'https') {
                    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
                }
                else {
                    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                }
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(bp, s);
            })();
        </script>
    

    <script>
        (function(){
        var src = "https://jspassport.ssl.qhimg.com/11.0.1.js?d182b3f28525f2db83acfaaf6e696dba";
        document.write('<script src="' + src + '" id="sozz"><\/script>');
        })();
    </script>

<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body>

    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/laoban.jpeg" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">鱼丸粗面的博客</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-home"></i>
            
            <span>首页</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/tags" class="waves-effect waves-light">
            
            <i class="fa fa-tags"></i>
            
            <span>标签</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <i class="fa fa-bookmark"></i>
            
            <span>分类</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/archives" class="waves-effect waves-light">
            
            <i class="fa fa-archive"></i>
            
            <span>归档</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/about" class="waves-effect waves-light">
            
            <i class="fa fa-user-circle-o"></i>
            
            <span>关于</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/friends" class="waves-effect waves-light">
            
            <i class="fa fa-address-book"></i>
            
            <span>友情链接</span>
        </a>
    </li>
    
    <li>
        <a href="#searchModal" class="modal-trigger waves-effect waves-light">
            <i id="searchIcon" class="fa fa-search" title="搜索"></i>
        </a>
    </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/laoban.jpeg" class="logo-img circle responsive-img">
        
        <div class="logo-name">鱼丸粗面的博客</div>
        <div class="logo-desc">
            
            天津理工大学 | 信息安全 | 后端开发
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li>
            <a href="/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-home"></i>
                
                首页
            </a>
        </li>
        
        <li>
            <a href="/tags" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-tags"></i>
                
                标签
            </a>
        </li>
        
        <li>
            <a href="/categories" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-bookmark"></i>
                
                分类
            </a>
        </li>
        
        <li>
            <a href="/archives" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-archive"></i>
                
                归档
            </a>
        </li>
        
        <li>
            <a href="/about" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-user-circle-o"></i>
                
                关于
            </a>
        </li>
        
        <li>
            <a href="/friends" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-address-book"></i>
                
                友情链接
            </a>
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/LaoBan-ywcm" class="waves-effect waves-light" target="_blank">
                <i class="fa fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/LaoBan-ywcm" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/3.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        Linux 学习笔记
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 20px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                        <a href="/tags/Linux/" target="_blank">
                            <span class="chip bg-color">Linux</span>
                        </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fa fa-bookmark fa-fw icon-category"></i>
                        
                        <a href="/categories/笔记/" class="post-category" target="_blank">
                            笔记
                        </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                <div class="post-date info-break-policy">
                    <i class="fa fa-calendar-minus-o fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2020-09-05
                </div>

                <div class="post-author info-break-policy">
                    <i class="fa fa-user-o fa-fw"></i>作者:&nbsp;&nbsp;
                    
                    KaKa
                    
                </div>

                
                
                <div class="info-break-policy">
                    <i class="fa fa-file-word-o fa-fw"></i>文章字数:&nbsp;&nbsp;
                    9k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="fa fa-clock-o fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    41 分
                </div>
                
                

                
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>Linux笔记</p>
<h3 id="基础命令"><a href="#基础命令" class="headerlink" title="基础命令"></a>基础命令</h3><ul>
<li><p>创建多个嵌套目录</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">mkdir</span> -p a/b/c<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>查看嵌套目录</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">ls</span> -R ./<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><code>ls -h</code>会显示文件的大小</p>
</li>
<li><p>复制文件保留元信息（复制文件默认会修改文件的元信息）</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">cp</span> -a a b<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>通配符，只匹配一个字符</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">ls</span> a?
<span class="token comment" spellcheck="true"># 会匹配ab 不会匹配abc</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
</li>
<li><p>打包文件，解包文件</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 打包文件</span>
<span class="token function">tar</span> cf xxx.tar /a

<span class="token comment" spellcheck="true"># 解包文件</span>
<span class="token function">tar</span> xf xxx.tar -C /a<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>将a目录下的文件打包成xxx.tar文件,<code>f</code>表示打包成文件</p>
<p><code>tar</code>命令的参数是不带<code>-</code>的</p>
</li>
<li><p>压缩文件，解压文件</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># gzip压缩文件，打包文件加压缩</span>
<span class="token function">tar</span> czf xxx.tar.gz /a

<span class="token comment" spellcheck="true">#解压文件</span>
<span class="token function">tar</span> xzf xxx.tar.gz -C /a

<span class="token comment" spellcheck="true"># bzip2压缩文件，打包文件加压缩</span>
<span class="token function">tar</span> cjf xxx.tar.bz2 /a

<span class="token comment" spellcheck="true">#解压文件</span>
<span class="token function">tar</span> xjf xx.tar.gz _v /a<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>bzip2压缩的文件方式要比gzip小，压缩比例更高</p>
</li>
</ul>
<h3 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h3><h5 id="进入插入模式："><a href="#进入插入模式：" class="headerlink" title="进入插入模式："></a>进入插入模式：</h5><p><code>-i</code>：当前位置进入插入模式</p>
<p><code>-I</code>：跳转到行前进入插入模式</p>
<p><code>-a</code>：跳转到下一个字符进入插入模式</p>
<p><code>-A</code>：跳转到行尾进入插入模式</p>
<p><code>-o</code>：下一行进入插入模式</p>
<p><code>-O</code>：上一行进入插入模式</p>
<h4 id="命令行模式"><a href="#命令行模式" class="headerlink" title="命令行模式"></a>命令行模式</h4><p><code>!</code>：可以执行linux命令</p>
<p><code>:s/a/b</code>：对当前行进行替换</p>
<p><code>:%s/a/b/g</code>：对所有符合条件的内容进行替换</p>
<p><code>:10,25s/a.b/g</code>：对10-25行中的内容进行替换</p>
<h4 id="可视模式"><a href="#可视模式" class="headerlink" title="可视模式"></a>可视模式</h4><p><code>v</code>：字符可视模式</p>
<p><code>V</code>：行可视模式</p>
<p><code>^+v</code>：块可视模式</p>
<p><code>I</code>：可以在快模式下编辑多行，编辑完后按两下<code>esc</code>键，修改就会同步到其他行</p>
<p><code>d</code>：在快模式下，删除多行选中的字符</p>
<h4 id="复制"><a href="#复制" class="headerlink" title="复制"></a>复制</h4><p><code>yy</code>：复制正行</p>
<p><code>n yy</code>：复制n行</p>
<p><code>y$</code>：从当前字符复制到行尾</p>
<p><code>p</code>：粘贴</p>
<h4 id="剪切"><a href="#剪切" class="headerlink" title="剪切"></a>剪切</h4><p><code>dd</code>：剪切整行</p>
<p><code>n dd</code>：剪切n行</p>
<p><code>d$</code>：剪切当前字符到行尾</p>
<h4 id="撤销"><a href="#撤销" class="headerlink" title="撤销"></a>撤销</h4><p><code>u</code>：撤销</p>
<p><code>^+r</code>：反向撤销</p>
<h4 id="替换"><a href="#替换" class="headerlink" title="替换"></a>替换</h4><p><code>r</code>：替换单个字符</p>
<p><code>x</code>：删除单个字符</p>
<h4 id="跳转到指定行"><a href="#跳转到指定行" class="headerlink" title="跳转到指定行"></a>跳转到指定行</h4><p><code>n G</code>：跳转到第n行</p>
<p><code>gg</code>：跳转到第一行</p>
<p><code>G</code>：跳转到最后一行</p>
<p><code>$</code>：跳转到该行的行尾</p>
<p><code>^</code>：跳转到该行的行首</p>
<h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><h4 id="添加用户（需要在root用户下执行，其他普通用户无法创建用户）"><a href="#添加用户（需要在root用户下执行，其他普通用户无法创建用户）" class="headerlink" title="添加用户（需要在root用户下执行，其他普通用户无法创建用户）"></a>添加用户（需要在root用户下执行，其他普通用户无法创建用户）</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 不会创建用户目录、设定密码等</span>
<span class="token function">useradd</span> abc

<span class="token comment" spellcheck="true"># 会创建用户目录、设定密码等</span>
adduser abc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="设置密码"><a href="#设置密码" class="headerlink" title="设置密码"></a>设置密码</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">passwd</span> abc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="查看某一个用户是否存在"><a href="#查看某一个用户是否存在" class="headerlink" title="查看某一个用户是否存在"></a>查看某一个用户是否存在</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">id</span> abc
<span class="token comment" spellcheck="true"># uid=0(root) gid=0(root) groups=0(root),113(docker)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h4 id="添加用户会进过那些操作"><a href="#添加用户会进过那些操作" class="headerlink" title="添加用户会进过那些操作"></a>添加用户会进过那些操作</h4><ol>
<li><p>会在<code>/etc/passwd</code>中添加用户</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">cat</span> /etc/passwd
<span class="token comment" spellcheck="true"># abc:x:1002:1002::/home/abc:/bin/sh</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
</li>
<li><p>会在<code>/etc/shadow</code>中添加用户</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">cat</span> /etc/shadow
<span class="token comment" spellcheck="true"># abc:!:18510:0:99999:7:::</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
</li>
</ol>
<h4 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 不会删除用户目录</span>
<span class="token function">userdel</span> abc

<span class="token comment" spellcheck="true"># 删除用户目录</span>
<span class="token function">userdel</span> -r abc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="修改用户属性"><a href="#修改用户属性" class="headerlink" title="修改用户属性"></a>修改用户属性</h4><p>修改用户目录</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">usermod</span> -d /home/dd abc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>修改用户所属的组</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">usermod</span> -g group1 abc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="新建用户组"><a href="#新建用户组" class="headerlink" title="新建用户组"></a>新建用户组</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">groupadd</span> group1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="切换用户"><a href="#切换用户" class="headerlink" title="切换用户"></a>切换用户</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">su</span> - abc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><code>-</code>表示完全切换，会切换到该用户的目录下，如果没有<code>-</code>则还会在当前目录</p>
<h4 id="给特定用户执行某些命令的权限"><a href="#给特定用户执行某些命令的权限" class="headerlink" title="给特定用户执行某些命令的权限"></a>给特定用户执行某些命令的权限</h4><pre class="line-numbers language-bash"><code class="language-bash">visudo<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>用上面的命令可以给某些用户赋予某些命令的权限</p>
<h4 id="etc-passwd文件解析"><a href="#etc-passwd文件解析" class="headerlink" title="/etc/passwd文件解析"></a>/etc/passwd文件解析</h4><pre class="line-numbers language-bash"><code class="language-bash">root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin

<span class="token comment" spellcheck="true"># 用户名/用户是否需要密码进行验证/uid/gid/注释/用户目录/命令解释器</span>
<span class="token comment" spellcheck="true"># sbin/nologin 是不能被登录的</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在新建用户时可以不用<code>adduser</code>命令，直接编辑该文件也可以起到新增用户的目的</p>
<h4 id="etc-shadow-文件解析（用来保存用户和密码的关系）"><a href="#etc-shadow-文件解析（用来保存用户和密码的关系）" class="headerlink" title="/etc/shadow 文件解析（用来保存用户和密码的关系）"></a>/etc/shadow 文件解析（用来保存用户和密码的关系）</h4><pre class="line-numbers language-bash"><code class="language-bash">mysql:<span class="token operator">!</span>:18493424:0:99999:7:::
user1:<span class="token variable">$6</span><span class="token variable">$9JTohwDk</span><span class="token variable">$baTsdfsVJRRfSds6PCdF0xBQlqslTekjWK9xT7</span>/yIoTTUv45raWwtZRpwtMn5mNwjULCvL2XRJ9Nj3kFhekJBsjgBfq.:18511:0:99999:7:::

<span class="token comment" spellcheck="true"># 用户名/加密后的密码</span>

<span class="token comment" spellcheck="true"># 相同的密码加密后是不同的</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="etc-group-文件解析（用户组文件）"><a href="#etc-group-文件解析（用户组文件）" class="headerlink" title="/etc/group 文件解析（用户组文件）"></a>/etc/group 文件解析（用户组文件）</h4><pre class="line-numbers language-bash"><code class="language-bash">mysql:x:116:
user1:x:1002:

<span class="token comment" spellcheck="true"># 用户组名称/是否需要密码/gid/其他组设置(一个用户可以属于多个组)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h3><h4 id="文件权限格式"><a href="#文件权限格式" class="headerlink" title="文件权限格式"></a>文件权限格式</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">ls</span> -l

-rwx------+   8 xx  staff      256 Mar  6  2020 Movies
drwx------+  10 xx  staff      320 Mar  6  2020 Music

<span class="token comment" spellcheck="true"># 第一位，表示文件类型</span>
<span class="token comment" spellcheck="true"># 后面接着的9位 rwx------ 表示权限，每三个字符为一组，分别表示：用户对该文件的权限、该组对文件的权限和其他用户的权限</span>
<span class="token comment" spellcheck="true"># xx ：用户</span>
<span class="token comment" spellcheck="true"># staff： 用户组</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="文件类型"><a href="#文件类型" class="headerlink" title="文件类型"></a>文件类型</h4><p><code>-</code>：普通文件</p>
<p><code>d</code>：目录文件</p>
<p><code>b</code>：块特殊文件</p>
<p><code>c</code>：字符特殊文件</p>
<p><code>l</code>：符号链接</p>
<p><code>f</code>：命令管道</p>
<p><code>s</code>：套接字文件</p>
<h4 id="文件权限的表示方法"><a href="#文件权限的表示方法" class="headerlink" title="文件权限的表示方法"></a>文件权限的表示方法</h4><p>数字权限的表示方法</p>
<p>r=4</p>
<p>w=2</p>
<p>x=1</p>
<h4 id="目录权限的表示方法"><a href="#目录权限的表示方法" class="headerlink" title="目录权限的表示方法"></a>目录权限的表示方法</h4><p><code>x</code>：可以进入目录</p>
<p><code>rx</code>：显示目录内的文件名</p>
<p><code>wx</code>：修改目录内的文件名</p>
<h4 id="修改文件属主和属组的方法"><a href="#修改文件属主和属组的方法" class="headerlink" title="修改文件属主和属组的方法"></a>修改文件属主和属组的方法</h4><p>修改属主</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">chown</span> user1 /test<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>修改属组</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">chgrp</span> :user1 /test<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="修改权限"><a href="#修改权限" class="headerlink" title="修改权限"></a>修改权限</h4><p><code>u</code>：属主</p>
<p><code>g</code>：属组</p>
<p><code>o</code>：其他用户</p>
<p><code>a</code>：包括上述三种</p>
<p><code>+</code>：增加权限</p>
<p><code>-</code>：减少权限</p>
<p><code>=</code>：设置权限</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 为test的属主设置w权限</span>
<span class="token function">chmod</span> u+w ./test

<span class="token comment" spellcheck="true"># 为属主、属组合其他用户设置只有wr权限</span>
<span class="token function">chmod</span> a<span class="token operator">=</span>wr ./test<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>linux中默认的文件权限是644,是666-umask(022)=644，既<code>rw-r--r--</code></p>
<p>如果属主权限和属组权限冲突，则以属主权限为主</p>
<h4 id="特殊权限"><a href="#特殊权限" class="headerlink" title="特殊权限"></a>特殊权限</h4><p><code>SUID</code>：用户可执行的二进制文件，执行命令时获取文件属主的权限</p>
<pre class="line-numbers language-bash"><code class="language-bash">root@master:~<span class="token comment" spellcheck="true"># ls -l /usr/bin/passwd</span>
-rwsr-xr-x 1 root root 59640 Mar 23  2019 /usr/bin/passwd<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><code>SGID</code>：用于目录，在该目录下新建的文件和目录，权限自动更改为该目录的属组，常用于共享文件</p>
<p><code>SBIT</code>：用户目录，在该目录下新建的文件和目录，只有root和自己可以删除</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">ls</span> -l /
drwxrwxrwt  13 root root       4096 Sep  7 18:21 tmp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="网络管理"><a href="#网络管理" class="headerlink" title="网络管理"></a>网络管理</h3><h4 id="网络状态查看工具"><a href="#网络状态查看工具" class="headerlink" title="网络状态查看工具"></a>网络状态查看工具</h4><ol>
<li><p>net-tools(centos 7 之前推荐的工具)</p>
<ul>
<li>ifconfig</li>
<li>route</li>
<li>netstat</li>
</ul>
<h5 id="ifconfig"><a href="#ifconfig" class="headerlink" title="ifconfig"></a>ifconfig</h5><ul>
<li>eth0 第一块网卡（根据网卡接入方式不同，名称也会不同）</li>
</ul>
</li>
<li><p>iproute2(centos 7 之后推荐的工具)</p>
<ul>
<li>ip</li>
<li>ss</li>
</ul>
</li>
</ol>
<h4 id="修改网卡名称为eth0"><a href="#修改网卡名称为eth0" class="headerlink" title="修改网卡名称为eth0"></a>修改网卡名称为eth0</h4><p>网卡命名规则受<code>biosdevname</code>和<code>net.ifnames</code>两个参数影响</p>
<ol>
<li><p>编辑<code>etc/default/grub</code>文件，增加<code>biosdevname=0</code>和<code>net.ifnames=0</code></p>
<pre class="line-numbers language-bash"><code class="language-bash">GRUB_CMDLINE_LINUX<span class="token operator">=</span><span class="token string">"net.ifnames=0 biosdevname=0"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>更新grub</p>
<pre class="line-numbers language-bash"><code class="language-bash">grub2-mkconfig -o /boot/grub2/grub.cfg<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>重启(reboot)</p>
</li>
</ol>
<h4 id="查看网卡物理连接情况"><a href="#查看网卡物理连接情况" class="headerlink" title="查看网卡物理连接情况"></a>查看网卡物理连接情况</h4><pre class="line-numbers language-bash"><code class="language-bash">mii-tool eth0<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="查看网关"><a href="#查看网关" class="headerlink" title="查看网关"></a>查看网关</h4><pre class="line-numbers language-bash"><code class="language-bash">route -n<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>使用<code>-n</code>参数不解析主机名</p>
<h4 id="网络故障排除命令"><a href="#网络故障排除命令" class="headerlink" title="网络故障排除命令"></a>网络故障排除命令</h4><p><code>ping</code>：网络主机是否畅通</p>
<p><code>traceroute</code>：如果网络通畅，但是还是访问不通，可以通过该命令查看路由信息</p>
<p><code>mtr</code>：如果网络主机通畅，但是还是访问不通，可以查看是否有数据包丢失了</p>
<p><code>nslookup</code>：查看域名对应的ip</p>
<p><code>telnet</code>：如果主机没有问题，可以查看端口是否开放</p>
<p><code>tcpdump</code>：如果主机和端口都ok，则需要抓包进行分析</p>
<p><code>netstat</code>和<code>ss</code>：检测服务监听的地址是否正确</p>
<h4 id="网络服务管理-centos"><a href="#网络服务管理-centos" class="headerlink" title="网络服务管理(centos)"></a>网络服务管理(centos)</h4><p>可以分为两种：<code>SysV</code>和<code>systemd</code></p>
<p>网络配置文件：<code>ifcfg-eth0</code>，会随着网卡的不同文件名也会不同</p>
<p>比如<code>/etc/sysconfig/network-scripts/ifcfg-ens3</code>，在这个里面可以配置dhcp，ip等信息</p>
<h3 id="进程管理"><a href="#进程管理" class="headerlink" title="进程管理"></a>进程管理</h3><h4 id="调整优先级"><a href="#调整优先级" class="headerlink" title="调整优先级"></a>调整优先级</h4><p><code>nice</code>：范围从-20到19，值越小优先级越高，抢占的资源就越多</p>
<p><code>renice</code>：重新设置优先级</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 在启动前设置某一个程序的优先级</span>
<span class="token function">nice</span> -n 10 ./a.sh

<span class="token comment" spellcheck="true"># 在程序启动后重新设置一个程序的优先级</span>
<span class="token function">renice</span> -n 15 pid<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="进程的作业控制"><a href="#进程的作业控制" class="headerlink" title="进程的作业控制"></a>进程的作业控制</h4><p><code>&amp;</code>：将任务放到后台执行</p>
<pre class="line-numbers language-bash"><code class="language-bash">./a.bash <span class="token operator">&amp;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><code>jobs</code>:查看后台任务</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">jobs</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>将前台任务停止并放到后台</p>
<p><code>ctrl + z</code></p>
<p>将后台任务放到前台执行</p>
<p><code>fg jobsID</code></p>
<p>将前台任务放到后台执行</p>
<p><code>bg jobsID</code></p>
<h3 id="进程间通信"><a href="#进程间通信" class="headerlink" title="进程间通信"></a>进程间通信</h3><h4 id="查看信号"><a href="#查看信号" class="headerlink" title="查看信号"></a>查看信号</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@848e7f64efd8 /<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># kill -l</span>
 1<span class="token punctuation">)</span> SIGHUP     2<span class="token punctuation">)</span> SIGINT     3<span class="token punctuation">)</span> SIGQUIT     4<span class="token punctuation">)</span> SIGILL     5<span class="token punctuation">)</span> SIGTRAP
 6<span class="token punctuation">)</span> SIGABRT     7<span class="token punctuation">)</span> SIGBUS     8<span class="token punctuation">)</span> SIGFPE     9<span class="token punctuation">)</span> SIGKILL    10<span class="token punctuation">)</span> SIGUSR1
11<span class="token punctuation">)</span> SIGSEGV    12<span class="token punctuation">)</span> SIGUSR2    13<span class="token punctuation">)</span> SIGPIPE    14<span class="token punctuation">)</span> SIGALRM    15<span class="token punctuation">)</span> SIGTERM
16<span class="token punctuation">)</span> SIGSTKFLT    17<span class="token punctuation">)</span> SIGCHLD    18<span class="token punctuation">)</span> SIGCONT    19<span class="token punctuation">)</span> SIGSTOP    20<span class="token punctuation">)</span> SIGTSTP
21<span class="token punctuation">)</span> SIGTTIN    22<span class="token punctuation">)</span> SIGTTOU    23<span class="token punctuation">)</span> SIGURG    24<span class="token punctuation">)</span> SIGXCPU    25<span class="token punctuation">)</span> SIGXFSZ
26<span class="token punctuation">)</span> SIGVTALRM    27<span class="token punctuation">)</span> SIGPROF    28<span class="token punctuation">)</span> SIGWINCH    29<span class="token punctuation">)</span> SIGIO    30<span class="token punctuation">)</span> SIGPWR
31<span class="token punctuation">)</span> SIGSYS    34<span class="token punctuation">)</span> SIGRTMIN    35<span class="token punctuation">)</span> SIGRTMIN+1    36<span class="token punctuation">)</span> SIGRTMIN+2    37<span class="token punctuation">)</span> SIGRTMIN+3
38<span class="token punctuation">)</span> SIGRTMIN+4    39<span class="token punctuation">)</span> SIGRTMIN+5    40<span class="token punctuation">)</span> SIGRTMIN+6    41<span class="token punctuation">)</span> SIGRTMIN+7    42<span class="token punctuation">)</span> SIGRTMIN+8
43<span class="token punctuation">)</span> SIGRTMIN+9    44<span class="token punctuation">)</span> SIGRTMIN+10    45<span class="token punctuation">)</span> SIGRTMIN+11    46<span class="token punctuation">)</span> SIGRTMIN+12    47<span class="token punctuation">)</span> SIGRTMIN+13
48<span class="token punctuation">)</span> SIGRTMIN+14    49<span class="token punctuation">)</span> SIGRTMIN+15    50<span class="token punctuation">)</span> SIGRTMAX-14    51<span class="token punctuation">)</span> SIGRTMAX-13    52<span class="token punctuation">)</span> SIGRTMAX-12
53<span class="token punctuation">)</span> SIGRTMAX-11    54<span class="token punctuation">)</span> SIGRTMAX-10    55<span class="token punctuation">)</span> SIGRTMAX-9    56<span class="token punctuation">)</span> SIGRTMAX-8    57<span class="token punctuation">)</span> SIGRTMAX-7
58<span class="token punctuation">)</span> SIGRTMAX-6    59<span class="token punctuation">)</span> SIGRTMAX-5    60<span class="token punctuation">)</span> SIGRTMAX-4    61<span class="token punctuation">)</span> SIGRTMAX-3    62<span class="token punctuation">)</span> SIGRTMAX-2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="常用信号"><a href="#常用信号" class="headerlink" title="常用信号"></a>常用信号</h4><pre><code>ctrl + == SIGINT

# 立即终止，不收阻塞，信号是SIGKILL
kill -9 pid</code></pre><h4 id="守护进程（daemon）"><a href="#守护进程（daemon）" class="headerlink" title="守护进程（daemon）"></a>守护进程（daemon）</h4><p>让程序脱离当前终端执行：</p>
<ol>
<li><code>nohup</code></li>
<li>守护进程</li>
<li><code>screen</code>或者<code>tmux</code></li>
</ol>
<p><code>nohup</code>可以让一个命令脱离终端执行，但他不是守护进程</p>
<p>随着系统启动而启动，不用用户手动的去执行</p>
<p>每个进程的依赖的环境都在<code>/proc/pid</code>的文件夹中</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">cd</span> /proc/123

<span class="token comment" spellcheck="true"># 进程执行的位置</span>
<span class="token function">ls</span> -l cwd

<span class="token comment" spellcheck="true"># out</span>
 cwd -<span class="token operator">></span> /

<span class="token comment" spellcheck="true"># 进程的输出</span>
<span class="token function">ls</span> -l fd

<span class="token comment" spellcheck="true"># out</span>
lrwx------ 1 root root 64 Sep 14 05:15 0 -<span class="token operator">></span> /dev/pts/4
lrwx------ 1 root root 64 Sep 14 05:15 1 -<span class="token operator">></span> /dev/pts/4
lrwx------ 1 root root 64 Sep 14 05:15 2 -<span class="token operator">></span> /dev/pts/4
lrwx------ 1 root root 64 Sep 14 12:32 255 -<span class="token operator">></span> /dev/pts/4

<span class="token comment" spellcheck="true"># 0是标准输入</span>
<span class="token comment" spellcheck="true"># 1,2是标准输出</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="服务管理工具-systemctl"><a href="#服务管理工具-systemctl" class="headerlink" title="服务管理工具-systemctl"></a>服务管理工具-systemctl</h4><p>常用操作：</p>
<p><code>systemctl start|stop|restart|reload|enable|disable 服务名称</code></p>
<h4 id="SELinux"><a href="#SELinux" class="headerlink" title="SELinux"></a>SELinux</h4><p>安全增强版本的Linux，以前的linux是利用用户和文件的权限来进行安全控制既DAC（自主访问控制）</p>
<p>MAC（强制访问控制）：会给用户、进程和文件都打上标签，如果三者标签不一致则不允许执行</p>
<p>SElinux是一个内核模块，也是Linux的一个安全子系统。SELinux可是设置DAC或者是MAC。需要注意的是开启SELinux会消耗服务器的性能，所以一般在生产环境下都是关闭的</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 查看SELinux状态</span>
getenforce<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="内存和磁盘管理"><a href="#内存和磁盘管理" class="headerlink" title="内存和磁盘管理"></a>内存和磁盘管理</h3><h4 id="内存和磁盘使用率查看"><a href="#内存和磁盘使用率查看" class="headerlink" title="内存和磁盘使用率查看"></a>内存和磁盘使用率查看</h4><p>内存：</p>
<ul>
<li><p><code>free</code></p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@hadoop3 ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># free -m</span>
              total        used        <span class="token function">free</span>      shared  buff/cache   available
Mem:          64264       51686        2089         140       10488       11807
Swap:             0           0           0
<span class="token punctuation">[</span>root@hadoop3 ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># free -g</span>
              total        used        <span class="token function">free</span>      shared  buff/cache   available
Mem:             62          50           2           0          10          11
Swap:             0           0           0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p><code>top</code></p>
</li>
</ul>
<p>磁盘：</p>
<ul>
<li><p><code>fdisk</code></p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@hadoop3 ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># fdisk -l</span>

Disk /dev/vda: 53.7 GB, 53687091200 bytes, 104857600 sectors
Units <span class="token operator">=</span> sectors of 1 * 512 <span class="token operator">=</span> 512 bytes
Sector size <span class="token punctuation">(</span>logical/physical<span class="token punctuation">)</span>: 512 bytes / 512 bytes
I/O size <span class="token punctuation">(</span>minimum/optimal<span class="token punctuation">)</span>: 512 bytes / 512 bytes
Disk label type: dos
Disk identifier: 0x0009ac89

   Device Boot      Start         End      Blocks   Id  System
/dev/vda1   *        2048   104857566    52427759+  83  Linux

Disk /dev/vdb: 214.7 GB, 214748364800 bytes, 419430400 sectors
Units <span class="token operator">=</span> sectors of 1 * 512 <span class="token operator">=</span> 512 bytes
Sector size <span class="token punctuation">(</span>logical/physical<span class="token punctuation">)</span>: 512 bytes / 512 bytes
I/O size <span class="token punctuation">(</span>minimum/optimal<span class="token punctuation">)</span>: 512 bytes / 512 bytes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如上图所示，共有两个磁盘：/dev/vda、/dev/vdb</p>
<p>其中/dev/vda是分区了，因为有/dev/vda1</p>
</li>
<li><p><code>df</code></p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">df</span> -h

Filesystem      Size  Used Avail Use% Mounted on
/dev/vda1        50G   16G   32G  34% /
devtmpfs         32G     0   32G   0% /dev
tmpfs            32G   24K   32G   1% /dev/shm
tmpfs            32G  1.5M   32G   1% /run
tmpfs            32G     0   32G   0% /sys/fs/cgroup
/dev/vdb        197G   55G  134G  29% /data
tmpfs           6.3G     0  6.3G   0% /run/user/0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>常常用来查看磁盘是否满了</p>
</li>
<li><p><code>du</code></p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@hadoop3 elasticsearch<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># du -h docker-compose.yaml</span>
4.0K    docker-compose.yaml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><code>du -h</code>和<code>ls -lh</code>区别是，<code>du</code>是实际占用的空间，而<code>ls -lh</code>是包含空洞空间的，其中磁盘有些位置是空的，只是声明了文件存储的位置，并没有实际存储数据</p>
</li>
</ul>
<h4 id="Linux文件系统管理"><a href="#Linux文件系统管理" class="headerlink" title="Linux文件系统管理"></a>Linux文件系统管理</h4><p>Linux常见的文件系统：</p>
<ul>
<li>ext4</li>
<li>xfs</li>
<li>NTFS（需要安全额外的软件）</li>
</ul>
<p><strong>硬链接</strong></p>
<p>多个文件其实都是链接到同一个数据块，修改一个文件，其余的文件都会同步变化。</p>
<p>硬链接是不允许跨文件系统的。</p>
<p>创建硬链接的方式：<code>ln afile bfile</code></p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@VM-0-16-centos test<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># cat base</span>
aaaa
<span class="token punctuation">[</span>root@VM-0-16-centos test<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># ln base yin</span>
<span class="token punctuation">[</span>root@VM-0-16-centos test<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># ls -li</span>
<span class="token comment" spellcheck="true"># inode号是相同的，他们指向同一个inode块</span>
131106 -rw-r--r-- 2 root root 5 Nov 25 09:56 base
131106 -rw-r--r-- 2 root root 5 Nov 25 09:56 yin
<span class="token punctuation">[</span>root@VM-0-16-centos test<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># rm base</span>
rm: remove regular <span class="token function">file</span> ‘base’? y
<span class="token punctuation">[</span>root@VM-0-16-centos test<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># cat yin</span>
aaaa<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>软链接</strong></p>
<p>克服了硬链接不能跨文件系统的问题。</p>
<p>但是实现上是不同的，软链接是创建了完全不同的一个文件，当系统读取这个文件时会发现这个文件是个链接文件，所以就会读取它链接的那个原文件。</p>
<p>对软链接文件设置权限并不会改变该文件的权限，而是改变的是原文件。</p>
<p>创建软链接的方式：<code>ln -s afile bfile</code></p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@VM-0-16-centos test<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># cat base</span>
aaaa
<span class="token punctuation">[</span>root@VM-0-16-centos test<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># ln -s base ruan</span>
<span class="token punctuation">[</span>root@VM-0-16-centos test<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># ls -li</span>
<span class="token comment" spellcheck="true"># inode号不同</span>
131103 -rw-r--r-- 1 root root 5 Nov 25 09:59 base
131104 lrwxrwxrwx 1 root root 4 Nov 25 10:00 ruan -<span class="token operator">></span> base
<span class="token punctuation">[</span>root@VM-0-16-centos test<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># cat ruan</span>
aaaa
<span class="token punctuation">[</span>root@VM-0-16-centos test<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># rm base</span>
<span class="token punctuation">[</span>root@VM-0-16-centos test<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># ls -li</span>
total 0
131104 lrwxrwxrwx 1 root root 4 Nov 25 10:00 ruan -<span class="token operator">></span> base
<span class="token punctuation">[</span>root@VM-0-16-centos test<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># cat ruan</span>
<span class="token comment" spellcheck="true"># 当删除了原始文件，因为软连接是指向的原始文件，并没有指向inode号，所以访问不到原始文件</span>
cat: ruan: No such <span class="token function">file</span> or directory
<span class="token punctuation">[</span>root@VM-0-16-centos test<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># echo dddd >> ruan</span>
<span class="token punctuation">[</span>root@VM-0-16-centos test<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># ls -li</span>
<span class="token comment" spellcheck="true"># 向软连接里写内容，就相当于在原始文件里写内容，所以原始文件就重新出现了</span>
131103 -rw-r--r-- 1 root root 5 Nov 25 10:00 base
131104 lrwxrwxrwx 1 root root 4 Nov 25 10:00 ruan -<span class="token operator">></span> base
<span class="token punctuation">[</span>root@VM-0-16-centos test<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># cat base</span>
dddd<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="硬盘分区与挂载"><a href="#硬盘分区与挂载" class="headerlink" title="硬盘分区与挂载"></a>硬盘分区与挂载</h4><p>硬盘分区：<code>fdisk /dev/vdb</code>，如果是2T以上的硬盘需要用<code>parted</code>命令</p>
<p>格式化设置分区文件系统：<code>mkfs.文件系统 /dev/vdb</code></p>
<p>分区挂载到目录下：<code>mount /dev/vdb /xx</code></p>
<p>这样挂载只是将数据写到了内存中，如果想要重启后还是挂载到该目录，需要修改文件 /etc/fstab</p>
<pre class="line-numbers language-bash"><code class="language-bash">root@max-master:~<span class="token comment" spellcheck="true"># cat /etc/fstab</span>
UUID<span class="token operator">=</span>e1d5f0dc-9df2-421e-a87b-f761f5db8947 / ext4 defaults 0 0
<span class="token comment" spellcheck="true">###/swap.img    none    swap    sw    0    0</span>
max-master:gfs-configs    /var/cache/zoomeye-max    glusterfs    defaults,_netdev    0    0
/dev/vdb1 /xx ext4 defaults 0 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="Shell-编程"><a href="#Shell-编程" class="headerlink" title="Shell 编程"></a>Shell 编程</h3><h4 id="Shell-脚本的不同运行方式"><a href="#Shell-脚本的不同运行方式" class="headerlink" title="Shell 脚本的不同运行方式"></a>Shell 脚本的不同运行方式</h4><p>内建命令不需要创建子进程</p>
<p>内建命令对当前shell生效</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">bash</span> 1.sh
<span class="token comment" spellcheck="true"># 不用给1.sh赋予执行权限，bash脚本执行完后会回到当前目录</span>
<span class="token comment" spellcheck="true"># 会产生新的子进程</span>

./1.sh
<span class="token comment" spellcheck="true"># 必须要可执行权限，bash脚本执行完后会回到当前目录</span>
<span class="token comment" spellcheck="true"># 会产生新的子进程</span>

<span class="token function">source</span> 1.sh 和 <span class="token keyword">.</span> 1.sh
<span class="token comment" spellcheck="true"># 必须要可执行权限，bash脚本执行完后不会回到当前目录</span>
<span class="token comment" spellcheck="true"># 不会创建新的子进程</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="管道与重定向"><a href="#管道与重定向" class="headerlink" title="管道与重定向"></a>管道与重定向</h4><p>管道和信号是一样的，也是进程通信的方式之一</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 输入重定向</span>
<span class="token operator">&lt;</span>

<span class="token comment" spellcheck="true"># 输出重定向</span>
<span class="token operator">></span>

<span class="token comment" spellcheck="true"># 追加模式</span>
<span class="token operator">>></span>

<span class="token comment" spellcheck="true"># 将a.txt文件内容赋值给变量ss</span>
<span class="token function">read</span> ss <span class="token operator">&lt;</span> a.txt

<span class="token comment" spellcheck="true"># 将ss变量内容写入到文件中</span>
<span class="token keyword">echo</span> <span class="token variable">$ss</span> <span class="token operator">></span> a.txt

<span class="token comment" spellcheck="true"># 将ss变量内容追加到文件中</span>
<span class="token keyword">echo</span> <span class="token variable">$ss</span> <span class="token operator">>></span> a.txt

<span class="token comment" spellcheck="true"># 将错误信息重定向到文件中</span>
xxx 2<span class="token operator">></span> a.txt

<span class="token comment" spellcheck="true"># 将输出信息全部重定向到文件中</span>
xxx <span class="token operator">&amp;</span><span class="token operator">></span> a.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="变量的赋值"><a href="#变量的赋值" class="headerlink" title="变量的赋值"></a>变量的赋值</h4><p>shell中不区分变量类型</p>
<p>变量复制等号两边不允许有空格</p>
<p>将命令的值赋值给变量，使用<code>$()</code>和````</p>
<pre class="line-numbers language-bash"><code class="language-bash">a<span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span> -l /etc<span class="token variable">)</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="变量的作用范围"><a href="#变量的作用范围" class="headerlink" title="变量的作用范围"></a>变量的作用范围</h4><p>声明的变量只在当前的shell中生效，在子进程、父进程和<code>bash xx.sh</code>中都是不生效的，要想使得变量在<code>bash xx.sh</code>中生效，需要执行<code>source xx.sh</code>或者<code>. xx.sh</code>，因为这两种方式都不会创建新的子进程</p>
<p>使用<code>export xx</code>，可以使该变量在子进程中可用</p>
<p>使用<code>unset xx</code>，删除变量</p>
<h4 id="环境变量、预定义变量和位置变量"><a href="#环境变量、预定义变量和位置变量" class="headerlink" title="环境变量、预定义变量和位置变量"></a>环境变量、预定义变量和位置变量</h4><ul>
<li>环境变量：每个shell打开都可以获取到的变量<ul>
<li><code>env</code>：查看环境变量</li>
<li><code>set</code>：查看环境变量、预定义变量和位置变量</li>
<li><code>PATH</code>：该变量定义了命令查找的路径，我们需要添加路径时可以<code>PATH=$PATH:xx</code>，该变量修改后可以在子进程和别的shell中生效，因为被export了</li>
<li><code>PS1</code>：设置shell中提示</li>
</ul>
</li>
<li>预定义变量<ul>
<li><code>$?</code>：上一条命令是否执行成功，成功的话返回0</li>
<li><code>$$</code>：返回当前shell的PID</li>
<li><code>$0</code>：当前执行的程序</li>
</ul>
</li>
<li>位置变量<ul>
<li><code>$1</code>….<code>$n</code>：特别注意的是当大于等于10时，必须要写成<code>${10}...${xx}</code></li>
<li>如果想要给位置变量设置默认值可以用<code>${1-xx}</code>，<code>xx</code>就是设置的默认值</li>
</ul>
</li>
</ul>
<h4 id="环境变量配置文件"><a href="#环境变量配置文件" class="headerlink" title="环境变量配置文件"></a>环境变量配置文件</h4><p>所有用户都可用的环境变量保存在：</p>
<ul>
<li>/etc/profile</li>
<li>/etc/profile.d</li>
<li>/etc/bashrc</li>
</ul>
<p>用户自定义的环境变量：</p>
<ul>
<li>~/.bashrc</li>
<li>~/.bash_profile</li>
</ul>
<h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><ul>
<li>定义数组<ul>
<li><code>IPTS=(1 2 3 4)</code></li>
</ul>
</li>
<li>显示所有元素<ul>
<li><code>echo ${IPTS[@]}</code></li>
</ul>
</li>
<li>显示长度<ul>
<li><code>echo ${#IPTS[@]}</code></li>
</ul>
</li>
<li>获取第一个元素<ul>
<li><code>echo ${IPTS[0]}</code></li>
</ul>
</li>
</ul>
<h4 id="转义与引用"><a href="#转义与引用" class="headerlink" title="转义与引用"></a>转义与引用</h4><p>注意：单引号`是不对特殊字符进行解释，双引号”会对特殊字符进行解释</p>
<pre class="line-numbers language-bash"><code class="language-bash">➜ <span class="token keyword">echo</span> <span class="token string">'<span class="token variable">$a</span>'</span>
<span class="token variable">$a</span>

➜ <span class="token keyword">echo</span> <span class="token string">"<span class="token variable">$a</span>"</span>
1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>反引号`可以获取命令执行的结果</p>
<pre class="line-numbers language-bash"><code class="language-bash">➜ num1<span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> 4 + 5<span class="token variable">`</span></span>

➜ <span class="token keyword">echo</span> <span class="token variable">$num1</span>
9<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h4><ul>
<li>复制运算符</li>
<li>算数运算符<ul>
<li><code>expr 4 + 5</code>：只能支持整数</li>
<li><code>((4+5))</code>，((a=9))，((a++))：是let的简化方式</li>
</ul>
</li>
</ul>
<h4 id="特殊符号大全"><a href="#特殊符号大全" class="headerlink" title="特殊符号大全"></a>特殊符号大全</h4><ul>
<li><p><code>$()</code>和反引号的作用一样，里面包含需要执行的命令</p>
</li>
<li><p><code>()</code>会创建一个新的shell</p>
</li>
<li><p><code>[]</code>是<code>test</code>命令的简写</p>
<pre class="line-numbers language-bash"><code class="language-bash">➜ <span class="token punctuation">[</span><span class="token punctuation">[</span> 5 <span class="token operator">&lt;</span> 4 <span class="token punctuation">]</span><span class="token punctuation">]</span>

➜ <span class="token keyword">echo</span> <span class="token variable">$?</span>
1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>{}输出范围和快速操作</p>
<pre class="line-numbers language-bash"><code class="language-bash">➜ <span class="token keyword">echo</span> <span class="token punctuation">{</span>0<span class="token punctuation">..</span>9<span class="token punctuation">}</span>
0 1 2 3 4 5 6 7 8 9

<span class="token comment" spellcheck="true"># mv 1.sh 1.sh.bak</span>
➜ <span class="token function">mv</span> 1.sh<span class="token punctuation">{</span>,.bak<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>;会确保上一条命令执行完在执行下一条</p>
</li>
<li><p>:类似于python中的pass</p>
</li>
</ul>
<h4 id="test命令"><a href="#test命令" class="headerlink" title="test命令"></a>test命令</h4><ul>
<li>退出程序命令<ul>
<li>exit：会返回上一条命令的成功与否</li>
<li>exit 10：返回值10，非0则是不正常退出</li>
</ul>
</li>
<li>test命令可以用来检查文件或者比较值<ul>
<li>test可以做一下测试<ul>
<li>文件测试</li>
<li>整数比较测试</li>
<li>字符串测试</li>
</ul>
</li>
<li>test测试语句可以简化为[]符号</li>
<li>[]还有扩展写法[[]]支持&amp;&amp;、||等</li>
</ul>
</li>
</ul>
<h4 id="if-else"><a href="#if-else" class="headerlink" title="if else"></a>if else</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token operator">==</span> <span class="token string">"start"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token keyword">echo</span> <span class="token string">"<span class="token variable">$0</span> start..."</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token operator">==</span> <span class="token string">"stop"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token keyword">echo</span> <span class="token string">"<span class="token variable">$0</span> stop..."</span>
<span class="token keyword">else</span>
    <span class="token keyword">echo</span> <span class="token string">"Usage: <span class="token variable">$0</span> {start|stop}"</span>
<span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="case"><a href="#case" class="headerlink" title="case"></a>case</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token keyword">case</span> <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token keyword">in</span> 
    <span class="token string">"start"</span> <span class="token operator">|</span> <span class="token string">"START"</span><span class="token punctuation">)</span>
        <span class="token keyword">echo</span> <span class="token string">"<span class="token variable">$0</span> start..."</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>

    <span class="token string">"stop"</span><span class="token punctuation">)</span>
        <span class="token keyword">echo</span> <span class="token string">"<span class="token variable">$0</span> stop..."</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>

    *<span class="token punctuation">)</span>
        <span class="token keyword">echo</span> <span class="token string">"Usage: <span class="token variable">$0</span> {start|stop}"</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
esac<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="for"><a href="#for" class="headerlink" title="for"></a>for</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span>

<span class="token keyword">for</span> filename <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span> *.mp3<span class="token variable">)</span></span> <span class="token punctuation">;</span> <span class="token keyword">do</span>
    <span class="token function">mv</span> <span class="token variable">$filename</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">basename</span> $filename .mp3<span class="token variable">)</span></span>.mp4
<span class="token keyword">done</span>

<span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">))</span></span> <span class="token punctuation">;</span> <span class="token keyword">do</span>
    <span class="token keyword">echo</span> <span class="token variable">$i</span>
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="while"><a href="#while" class="headerlink" title="while"></a>while</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span>

n<span class="token operator">=</span>1
<span class="token comment" spellcheck="true"># [[ $n &lt; 10 ]] 不能用于条件判断</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span>  <span class="token variable">$n</span> -lt 10 <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    <span class="token keyword">echo</span> <span class="token variable">$n</span>
    <span class="token variable"><span class="token punctuation">((</span>n<span class="token operator">++</span><span class="token punctuation">))</span></span>

<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="嵌套"><a href="#嵌套" class="headerlink" title="嵌套"></a>嵌套</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span>

<span class="token keyword">for</span> filename <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span> *.mp4<span class="token variable">)</span></span> <span class="token punctuation">;</span> <span class="token keyword">do</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> -x <span class="token variable">$filename</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token keyword">echo</span> <span class="token variable">$filename</span> <span class="token punctuation">;</span> <span class="token keyword">break</span>
    <span class="token keyword">fi</span>
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="循环处理位置参数"><a href="#循环处理位置参数" class="headerlink" title="循环处理位置参数"></a>循环处理位置参数</h4><p><code>$#</code>：位置参数的数量</p>
<p><code>$*</code>：所有的位置参数</p>
<p><code>$0</code>：脚本名称</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span>

<span class="token comment" spellcheck="true"># for</span>
<span class="token keyword">for</span> args <span class="token keyword">in</span> <span class="token variable">$*</span> <span class="token punctuation">;</span> <span class="token keyword">do</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$args</span>"</span> <span class="token operator">=</span> <span class="token string">"help"</span> <span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token keyword">echo</span> <span class="token string">"<span class="token variable">$args</span>"</span> <span class="token string">"<span class="token variable">$args</span>"</span>
    <span class="token keyword">fi</span>
<span class="token keyword">done</span>

<span class="token comment" spellcheck="true"># while</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$#</span>"</span> -ge 1 <span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token keyword">do</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token operator">=</span> <span class="token string">"help"</span> <span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token keyword">echo</span> <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token string">"<span class="token variable">$1</span>"</span>
    <span class="token keyword">fi</span>
    <span class="token function">shift</span>
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="自定义函数"><a href="#自定义函数" class="headerlink" title="自定义函数"></a>自定义函数</h4><p><code>local</code>：声明函数内变量</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span>

<span class="token keyword">function</span> checkpid<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    local i

    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token variable">$*</span> <span class="token punctuation">;</span> <span class="token keyword">do</span>
        <span class="token punctuation">[</span> -d <span class="token string">"/proc/<span class="token variable">$i</span>"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">return</span> 0
    <span class="token keyword">done</span>

    <span class="token keyword">return</span> 1
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="脚本控制"><a href="#脚本控制" class="headerlink" title="脚本控制"></a>脚本控制</h4><p>fork炸弹</p>
<p><code>.(){.|.&amp;};.</code></p>
<p>普通用户创建的线程数是收到控制的，可以通过<code>ulimit -a</code>控制</p>
<h4 id="捕获信号"><a href="#捕获信号" class="headerlink" title="捕获信号"></a>捕获信号</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># kill -l</span>
1<span class="token punctuation">)</span> SIGHUP     2<span class="token punctuation">)</span> SIGINT     3<span class="token punctuation">)</span> SIGQUIT     4<span class="token punctuation">)</span> SIGILL     5<span class="token punctuation">)</span> SIGTRAP
6<span class="token punctuation">)</span> SIGABRT     7<span class="token punctuation">)</span> SIGBUS     8<span class="token punctuation">)</span> SIGFPE     9<span class="token punctuation">)</span> SIGKILL    10<span class="token punctuation">)</span> SIGUSR1
11<span class="token punctuation">)</span> SIGSEGV    12<span class="token punctuation">)</span> SIGUSR2    13<span class="token punctuation">)</span> SIGPIPE    14<span class="token punctuation">)</span> SIGALRM    15<span class="token punctuation">)</span> SIGTERM
16<span class="token punctuation">)</span> SIGSTKFLT    17<span class="token punctuation">)</span> SIGCHLD    18<span class="token punctuation">)</span> SIGCONT    19<span class="token punctuation">)</span> SIGSTOP    20<span class="token punctuation">)</span> SIGTSTP
21<span class="token punctuation">)</span> SIGTTIN    22<span class="token punctuation">)</span> SIGTTOU    23<span class="token punctuation">)</span> SIGURG    24<span class="token punctuation">)</span> SIGXCPU    25<span class="token punctuation">)</span> SIGXFSZ
26<span class="token punctuation">)</span> SIGVTALRM    27<span class="token punctuation">)</span> SIGPROF    28<span class="token punctuation">)</span> SIGWINCH    29<span class="token punctuation">)</span> SIGIO    30<span class="token punctuation">)</span> SIGPWR
31<span class="token punctuation">)</span> SIGSYS    34<span class="token punctuation">)</span> SIGRTMIN    35<span class="token punctuation">)</span> SIGRTMIN+1    36<span class="token punctuation">)</span> SIGRTMIN+2    37<span class="token punctuation">)</span> SIGRTMIN+3
38<span class="token punctuation">)</span> SIGRTMIN+4    39<span class="token punctuation">)</span> SIGRTMIN+5    40<span class="token punctuation">)</span> SIGRTMIN+6    41<span class="token punctuation">)</span> SIGRTMIN+7    42<span class="token punctuation">)</span> SIGRTMIN+8
43<span class="token punctuation">)</span> SIGRTMIN+9    44<span class="token punctuation">)</span> SIGRTMIN+10    45<span class="token punctuation">)</span> SIGRTMIN+11    46<span class="token punctuation">)</span> SIGRTMIN+12    47<span class="token punctuation">)</span> SIGRTMIN+13
48<span class="token punctuation">)</span> SIGRTMIN+14    49<span class="token punctuation">)</span> SIGRTMIN+15    50<span class="token punctuation">)</span> SIGRTMAX-14    51<span class="token punctuation">)</span> SIGRTMAX-13    52<span class="token punctuation">)</span> SIGRTMAX-12
53<span class="token punctuation">)</span> SIGRTMAX-11    54<span class="token punctuation">)</span> SIGRTMAX-10    55<span class="token punctuation">)</span> SIGRTMAX-9    56<span class="token punctuation">)</span> SIGRTMAX-8    57<span class="token punctuation">)</span> SIGRTMAX-7
58<span class="token punctuation">)</span> SIGRTMAX-6    59<span class="token punctuation">)</span> SIGRTMAX-5    60<span class="token punctuation">)</span> SIGRTMAX-4    61<span class="token punctuation">)</span> SIGRTMAX-3    62<span class="token punctuation">)</span> SIGRTMAX-2
63<span class="token punctuation">)</span> SIGRTMAX-1    64<span class="token punctuation">)</span> SIGRTMAX<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span>

<span class="token function">trap</span> <span class="token string">"echo 15"</span> 15

<span class="token keyword">echo</span> $$

<span class="token keyword">while</span> <span class="token keyword">:</span> <span class="token punctuation">;</span> <span class="token keyword">do</span>
    <span class="token keyword">:</span>
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="计划任务"><a href="#计划任务" class="headerlink" title="计划任务"></a>计划任务</h4><p>单次任务用<code>at</code>，多次任务用<code>crontab</code></p>
<h4 id="文件加锁"><a href="#文件加锁" class="headerlink" title="文件加锁"></a>文件加锁</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 加锁</span>
flock -xn <span class="token string">"/tmp/f.lock"</span> -c <span class="token string">"/tmp/1.sh"</span>

<span class="token comment" spellcheck="true"># 另外一个地方执行该脚本时就会直接退出</span>
flock -xn <span class="token string">"/tmp/f.lock"</span> -c <span class="token string">"/tmp/1.sh"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="文本操作"><a href="#文本操作" class="headerlink" title="文本操作"></a>文本操作</h3><h4 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h4><p>grep 后面可以接正则元字符</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">grep</span> sdf.*$<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="find演示"><a href="#find演示" class="headerlink" title="find演示"></a>find演示</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">find</span> /etc -name pa*

<span class="token function">find</span> /etc -regex .*wd$

<span class="token function">find</span> *.txt -exec <span class="token function">rm</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> \<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="Sed-替换"><a href="#Sed-替换" class="headerlink" title="Sed 替换"></a>Sed 替换</h4><p>sed默认只替换每行的第一个</p>
<p>sed的基本工作方式：</p>
<ul>
<li>将文件按行读取到内存中</li>
<li>使用sed的每个脚本对该行进行操作</li>
<li>处理完成后输出改行</li>
</ul>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sed</span> <span class="token string">'a/lod/new/'</span> filename

<span class="token comment" spellcheck="true"># 如果要替换/，可以使用别的分隔符</span>
<span class="token function">sed</span> <span class="token string">'s!/!abc!'</span> filename

<span class="token comment" spellcheck="true"># 执行多个命令</span>
<span class="token function">sed</span> -e <span class="token string">'s/a/aa/'</span> -e <span class="token string">'s/aa/bb/'</span> afil
<span class="token function">sed</span> <span class="token string">'s/a/aa/;s/aa/bb/'</span> afile

<span class="token comment" spellcheck="true"># 将替换后的内容写入到原始文件</span>
<span class="token function">sed</span> -i <span class="token string">'s/a/aa/;s/aa/bb/'</span> afile

<span class="token comment" spellcheck="true"># 支持元字符</span>
<span class="token function">head</span> -5 /etc/passwd <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/s*bin//'</span>

<span class="token comment" spellcheck="true"># 支持回调，源文件内容：axyzb</span>
<span class="token comment" spellcheck="true"># 扩展元字符使用 -r 参数</span>
root@4ebe31ff7a18:/tmp<span class="token comment" spellcheck="true"># sed -r 's/(a.*b)/\1:\1/' cfile</span>
axyzb:axyzb<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="sed替换指令加强版"><a href="#sed替换指令加强版" class="headerlink" title="sed替换指令加强版"></a>sed替换指令加强版</h4><p>标志位</p>
<p>s/old/new/标志位</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 全局替换</span>
s/old/new/g

<span class="token comment" spellcheck="true"># 替换前两次</span>
s/old/new/2

<span class="token comment" spellcheck="true"># 只输出替换成功的行, -n 不输出行， p 输出替换成功的行</span>
<span class="token function">sed</span> -n <span class="token string">'s/root/123/p'</span>

<span class="token comment" spellcheck="true"># 将替换成功的行写入别的文件</span>
<span class="token function">sed</span> -n <span class="token string">'s/root/123/w a.txt'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>寻址</p>
<p>/正则表达式/s/old/new/g</p>
<p>行号s/old/new/g</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 从1-6行进行替换</span>
<span class="token function">head</span> -6 /etc/passwd <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'1,6s/games/!!!!!!!!/'</span>

<span class="token comment" spellcheck="true"># 匹配root行，进行替换</span>
<span class="token function">head</span> -6 /etc/passwd <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'/root/s/bash/!!!!!!!!/'</span>

<span class="token comment" spellcheck="true"># 多条命令</span>
<span class="token function">sed</span> /正则/<span class="token punctuation">{</span>s/old/new/<span class="token punctuation">;</span>s/old/new/<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>脚本文件</p>
<p>文件里写正常的sed命令</p>
<pre class="line-numbers language-bahs"><code class="language-bahs">sed -f sedscript filename<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="sed的其他常用命令"><a href="#sed的其他常用命令" class="headerlink" title="sed的其他常用命令"></a>sed的其他常用命令</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 删除行，删除操作会改变模式空间，就和管道的作用一样，后面的命令会以删除后的文件内容为准</span>
<span class="token function">sed</span> <span class="token string">'/ab/d'</span> bfile
<span class="token function">sed</span> <span class="token string">'/ab/d;='</span> bfile

<span class="token comment" spellcheck="true"># 在上一行插入</span>
<span class="token function">sed</span> <span class="token string">'/ab/i hello'</span> bfile

<span class="token comment" spellcheck="true"># 在下一行插入</span>
<span class="token function">sed</span> <span class="token string">'/ab/a hello'</span> bfile

<span class="token comment" spellcheck="true"># 替换行</span>
<span class="token function">sed</span> <span class="token string">'/ab/c hello'</span> bfile

<span class="token comment" spellcheck="true"># 合并两个文件</span>
<span class="token function">sed</span> <span class="token string">'/ab/r cfile'</span> bfile

<span class="token comment" spellcheck="true"># 下一行命令 n</span>
<span class="token comment" spellcheck="true"># 打印行号 =</span>

<span class="token comment" spellcheck="true"># 打印匹配行，这个替换中的p不同，通常和-n参数配合只打印匹配到的行</span>
<span class="token function">sed</span> -n <span class="token string">'/ab/p'</span> bfile

<span class="token comment" spellcheck="true"># 退出命令</span>
<span class="token function">sed</span> 10q filename <span class="token comment" spellcheck="true"># 不会把文件全部读入</span>
<span class="token function">sed</span> -n 1,10p filename<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="sed多行模式"><a href="#sed多行模式" class="headerlink" title="sed多行模式"></a>sed多行模式</h4><p><code>N</code>：将下一行加入到模式空间中</p>
<p><code>D</code>：删除模式空间中的第一个字符到第一个换行符</p>
<p><code>P</code>：打印模式空间中第一个字符到第一个换行符</p>
<pre class="line-numbers language-bash"><code class="language-bash">root@4ebe31ff7a18:/tmp<span class="token comment" spellcheck="true"># cat dfile</span>
hel
lo
root@4ebe31ff7a18:/tmp<span class="token comment" spellcheck="true"># sed 'N;s/hel\nlo/!!!/' dfile</span>
<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span>
root@4ebe31ff7a18:/tmp<span class="token comment" spellcheck="true"># sed 'N;s/hel.lo/!!!/' dfile</span>
<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span>

<span class="token comment" spellcheck="true"># 多行操作</span>
root@4ebe31ff7a18:/tmp<span class="token comment" spellcheck="true"># cat b.txt</span>
hell
o <span class="token function">bash</span> hel
lo <span class="token function">bash</span>
<span class="token comment" spellcheck="true"># 两行连起来操作</span>
root@4ebe31ff7a18:/tmp<span class="token comment" spellcheck="true"># sed 'N;s/\n//;s/hello bash/hello sed\n/;P;D' b.txt</span>
hello <span class="token function">sed</span>
 hello <span class="token function">sed</span>
<span class="token comment" spellcheck="true"># 三行连起来操作</span>
<span class="token function">sed</span> <span class="token string">'N;N;s/\n//;s/hello bash/hello sed\n/;P;D'</span> b.txt <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="sed保持空间"><a href="#sed保持空间" class="headerlink" title="sed保持空间"></a>sed保持空间</h4><p><img src="./image-20201019133011333.png" alt="image-20201019133011333"></p>
<p><code>h</code>和<code>H</code>将模式空间内容存放到保持空间</p>
<p><code>g</code>和<code>G</code>将保持空间内容取出到模式空间</p>
<p><code>x</code>交换模式空间和保持空间内容</p>
<blockquote>
<p>在保持空间中不能对数据进行操作，只能取到模式空间中才可以</p>
<p>小写是覆盖模式，大写是追加模式</p>
</blockquote>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 倒序输出，可以使用tac命令</span>
root@4ebe31ff7a18:/tmp<span class="token comment" spellcheck="true"># cat efile</span>
1
2
3
4
5
root@4ebe31ff7a18:/tmp<span class="token comment" spellcheck="true"># sed -n '1h;G;x;$p' efile</span>
4
3
2
1
1

<span class="token comment" spellcheck="true"># 解决第一行重复输出的问题，是因为第一行放入到保持空间后又拿了出来，修改为当第一次执行时不从保持空间取出来</span>
root@4ebe31ff7a18:/tmp<span class="token comment" spellcheck="true"># sed -n '1h;1!G;x;$p' efile</span>
4
3
2
1

<span class="token comment" spellcheck="true"># 解决最后一行没有输出的问题</span>
root@4ebe31ff7a18:/tmp<span class="token comment" spellcheck="true"># sed -n '1h;1!G;$!x;$p' efile</span>
5
4
3
2
1

<span class="token comment" spellcheck="true"># 另外的解决方法</span>
root@4ebe31ff7a18:/tmp<span class="token comment" spellcheck="true"># sed -n '1!G;h;$p' efile</span>
5
4
3
2
1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="认识AWK"><a href="#认识AWK" class="headerlink" title="认识AWK"></a>认识AWK</h4><ul>
<li><code>awk</code>更像是脚本语言</li>
<li><code>awk</code>用于比较规范的文本处理，用于统计数量并输出指定字段</li>
<li><code>sed</code>将不规范的文本，处理为比较规范的文本</li>
</ul>
<h4 id="AWK的字段"><a href="#AWK的字段" class="headerlink" title="AWK的字段"></a>AWK的字段</h4><ul>
<li>每行称作AWK的记录</li>
<li>使用空格、制表符分隔开的单词成为字段</li>
<li>可以自己制定分隔的字段</li>
</ul>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">awk</span> -F <span class="token string">"''"</span> <span class="token string">'/^menu/{ print x++, <span class="token variable">$2</span> }'</span> /boot/grub2/grub.cfg<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li><code>-F</code>：指定分隔符</li>
<li><code>x++</code>：打印行号</li>
<li><code>^menu</code>：匹配行</li>
</ul>
<h4 id="AWK表达式"><a href="#AWK表达式" class="headerlink" title="AWK表达式"></a>AWK表达式</h4><p>系统变量</p>
<ul>
<li><code>FS</code>表示输入的内容用什么分隔，<code>OFS</code>表示输出用什么符号分隔</li>
<li><code>RS</code>行分隔符</li>
<li><code>NR</code>打印行号，如果文件变化了<code>NR</code>是不会重新排号，<code>FNR</code>则会重新排号</li>
<li><code>NF</code>字段的数量</li>
</ul>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 下面两行意义相同，BEGIN表示在输入内容之前的操作</span>
<span class="token function">head</span> -n 6 /etc/passwd <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'BEGIN{FS=":"}{print <span class="token variable">$1</span>}'</span>
<span class="token function">head</span> -n 6 /etc/passwd <span class="token operator">|</span> <span class="token function">awk</span> -F <span class="token string">':'</span> <span class="token string">'{print <span class="token variable">$1</span>}'</span>

<span class="token comment" spellcheck="true"># 设置输出分隔符</span>
<span class="token function">head</span> -n 6 /etc/passwd <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'BEGIN{FS=":";OFS="-"}{print <span class="token variable">$1</span>,<span class="token variable">$2</span>}

# 改变内容行的分隔符，改为通过:来换行，<span class="token variable">$0</span>是输出一行
head -n 6 /etc/passwd | awk '</span>BEGIN<span class="token punctuation">{</span>RS<span class="token operator">=</span><span class="token string">":"</span><span class="token punctuation">}</span><span class="token punctuation">{</span>print <span class="token variable">$0</span><span class="token punctuation">}</span><span class="token string">'

# 打印行号
root@709230c0b366:~# awk '</span><span class="token punctuation">{</span>print NR, <span class="token variable">$0</span><span class="token punctuation">}</span><span class="token string">' /etc/hosts /etc/hosts
1 127.0.0.1    localhost
2 ::1    localhost ip6-localhost ip6-loopback
3 fe00::0    ip6-localnet
4 ff00::0    ip6-mcastprefix
5 ff02::1    ip6-allnodes
6 ff02::2    ip6-allrouters
7 172.17.0.4    709230c0b366
8 127.0.0.1    localhost
9 ::1    localhost ip6-localhost ip6-loopback
10 fe00::0    ip6-localnet
11 ff00::0    ip6-mcastprefix
12 ff02::1    ip6-allnodes
13 ff02::2    ip6-allrouters
14 172.17.0.4    709230c0b366
root@709230c0b366:~# awk '</span><span class="token punctuation">{</span>print FNR, <span class="token variable">$0</span><span class="token punctuation">}</span><span class="token string">' /etc/hosts /etc/hosts
1 127.0.0.1    localhost
2 ::1    localhost ip6-localhost ip6-loopback
3 fe00::0    ip6-localnet
4 ff00::0    ip6-mcastprefix
5 ff02::1    ip6-allnodes
6 ff02::2    ip6-allrouters
7 172.17.0.4    709230c0b366
1 127.0.0.1    localhost
2 ::1    localhost ip6-localhost ip6-loopback
3 fe00::0    ip6-localnet
4 ff00::0    ip6-mcastprefix
5 ff02::1    ip6-allnodes
6 ff02::2    ip6-allrouters
7 172.17.0.4    709230c0b366

# 打印有多少个字段
head -n 6 /etc/passwd | awk '</span>BEGIN<span class="token punctuation">{</span>FS<span class="token operator">=</span><span class="token string">":"</span><span class="token punctuation">}</span><span class="token punctuation">{</span>print NF<span class="token punctuation">}</span><span class="token string">'

# 打印最后一个字段的值
head -n 6 /etc/passwd | awk '</span>BEGIN<span class="token punctuation">{</span>FS<span class="token operator">=</span><span class="token string">":"</span><span class="token punctuation">}</span><span class="token punctuation">{</span>print <span class="token variable">$NF</span><span class="token punctuation">}</span>'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="AWK的判断和循环"><a href="#AWK的判断和循环" class="headerlink" title="AWK的判断和循环"></a>AWK的判断和循环</h4><pre class="line-numbers language-bash"><code class="language-bash">root@7dc8bb7d5702:/tmp<span class="token comment" spellcheck="true"># cat a.txt</span>
user1 34 54 23 12
user2 94 34 73 22
user3 99 45 12 49
root@7dc8bb7d5702:/tmp<span class="token comment" spellcheck="true"># awk '{ if($2>80) {print $1,$2} }' a.txt</span>
user2 94
user3 99
root@7dc8bb7d5702:/tmp<span class="token comment" spellcheck="true"># awk '{ for(c=2;c&lt;=NF;c++) print $c }' a.txt</span>
34
54
23
12
94
34
73
22
99
45
12
49
root@7dc8bb7d5702:/tmp<span class="token comment" spellcheck="true"># awk '{ for(c=2;c&lt;=NF;c++) sum+=$c; print sum}' a.txt</span>
123
346
551<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="AWK数组"><a href="#AWK数组" class="headerlink" title="AWK数组"></a>AWK数组</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># END表示数据读入完毕</span>
root@7dc8bb7d5702:/tmp<span class="token comment" spellcheck="true"># awk '{ sum=0; for(c=2;c&lt;=NF;c++) sum+=$c; average[$1]=sum/(NF-1) }END{ for( user in average ) print user,average[user] }' a.txt</span>
user1 30.75
user2 55.75
user3 51.25
root@7dc8bb7d5702:/tmp<span class="token comment" spellcheck="true"># cat a.txt</span>
user1 34 54 23 12
user2 94 34 73 22
user3 99 45 12 49
root@7dc8bb7d5702:/tmp<span class="token comment" spellcheck="true"># awk '{ sum=0; for(c=2;c&lt;=NF;c++) sum+=$c; average[$1]=sum/(NF-1) }END{ for( user in average ) print user,average[user] }' a.txt</span>
user1 30.75
user2 55.75
user3 51.25
root@7dc8bb7d5702:/tmp<span class="token comment" spellcheck="true"># awk '{ sum=0; for(c=2;c&lt;=NF;c++) sum+=$c; average[$1]=sum/(NF-1) }END{ for( user in average ) sum2+=average[user]; print sum2/NR }' a.txt</span>
45.9167<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="AWK数组的应用"><a href="#AWK数组的应用" class="headerlink" title="AWK数组的应用"></a>AWK数组的应用</h4><pre class="line-numbers language-bash"><code class="language-bash">root@7dc8bb7d5702:/tmp<span class="token comment" spellcheck="true"># cat a.txt</span>
user1 34 54 23 12
user2 94 34 73 22
user3 99 45 12 49
root@7dc8bb7d5702:/tmp<span class="token comment" spellcheck="true"># cat result.awk</span>
<span class="token punctuation">{</span>
<span class="token function">sum</span> <span class="token operator">=</span> 0
for<span class="token punctuation">(</span>c <span class="token operator">=</span> 2<span class="token punctuation">;</span> c <span class="token operator">&lt;=</span> NF<span class="token punctuation">;</span> c++<span class="token punctuation">)</span>
    <span class="token function">sum</span> +<span class="token operator">=</span> <span class="token variable">$c</span>

average<span class="token punctuation">[</span><span class="token variable">$1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">sum</span> / <span class="token punctuation">(</span>NF - 1<span class="token punctuation">)</span>
print <span class="token variable">$1</span>, average<span class="token punctuation">[</span><span class="token variable">$1</span><span class="token punctuation">]</span>

<span class="token punctuation">}</span>
END<span class="token punctuation">{</span>
for<span class="token punctuation">(</span>user <span class="token keyword">in</span> average<span class="token punctuation">)</span>
    sum_all +<span class="token operator">=</span> average<span class="token punctuation">[</span>user<span class="token punctuation">]</span>

avg_all <span class="token operator">=</span> sum_all / NR

for<span class="token punctuation">(</span>user <span class="token keyword">in</span> average<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>average<span class="token punctuation">[</span>user<span class="token punctuation">]</span> <span class="token operator">></span> avg_all<span class="token punctuation">)</span>
        above++
    <span class="token keyword">else</span>
        below++

print <span class="token string">"above"</span>, above
print <span class="token string">"below"</span>, below

<span class="token punctuation">}</span>
root@7dc8bb7d5702:/tmp<span class="token comment" spellcheck="true"># awk -f result.awk a.txt</span>
user1 30.75
user2 55.75
user3 51.25
above 2
below 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="AWK函数"><a href="#AWK函数" class="headerlink" title="AWK函数"></a>AWK函数</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 整数</span>
root@7dc8bb7d5702:/tmp<span class="token comment" spellcheck="true"># awk 'BEGIN{pi=3.114; print int(pi)}'</span>
3

<span class="token comment" spellcheck="true"># 随机数</span>
root@7dc8bb7d5702:/tmp<span class="token comment" spellcheck="true"># awk 'BEGIN{srand(); print rand()}'</span>
0.739691
root@7dc8bb7d5702:/tmp<span class="token comment" spellcheck="true"># awk 'BEGIN{srand(); print rand()}'</span>
0.00276686
root@7dc8bb7d5702:/tmp<span class="token comment" spellcheck="true"># awk 'BEGIN{srand(); print rand()}'</span>
0.134305

<span class="token comment" spellcheck="true"># 自定义函数</span>
root@7dc8bb7d5702:/tmp<span class="token comment" spellcheck="true"># awk 'function double(str) {return str str} BEGIN{print double("hello")}'</span>
hellohello<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="服务管理"><a href="#服务管理" class="headerlink" title="服务管理"></a>服务管理</h3><h4 id="防火墙概述"><a href="#防火墙概述" class="headerlink" title="防火墙概述"></a>防火墙概述</h4><ul>
<li>软件防火墙，主要用来限制ip，过滤一些ip等<ul>
<li>包过滤防火墙，比如控制ip，iptables就是包过滤防火墙</li>
<li>应用层防火墙，比如根据系统用户来控制</li>
</ul>
</li>
<li>硬件防火墙，用来放dos攻击等，也兼顾一些软件防火墙的功能</li>
</ul>
<p>Centos 6默认使用的防火墙是iptables,Centos 7 是firewallD，但这两者底层都是内核中的netfilter来进行实际的控制</p>
<h4 id="iptables的表和链"><a href="#iptables的表和链" class="headerlink" title="iptables的表和链"></a>iptables的表和链</h4><ul>
<li>规则表<pre><code>* filter，用来过滤
* nat，地址空间转换
* mangle
* Raw</code></pre></li>
<li>规则链<pre><code>* INPUT
* OUTPUT
* FORWARD
* PREROUTING，路由前
* POSTROUTING，路由后</code></pre></li>
</ul>
<h4 id="iptables-filter表"><a href="#iptables-filter表" class="headerlink" title="iptables filter表"></a>iptables filter表</h4><ul>
<li>iptales -t filter 命令 规则链 规则</li>
</ul>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># -v 显示更详细信息</span>
<span class="token comment" spellcheck="true"># -n 不进行反向域名解析</span>
<span class="token comment" spellcheck="true"># -L 显示iptables信息</span>
<span class="token punctuation">[</span>root@VM-0-16-centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># iptables -t filter -vnL</span>
Chain INPUT <span class="token punctuation">(</span>policy ACCEPT 380 packets, 28982 bytes<span class="token punctuation">)</span>
 pkts bytes target     prot opt <span class="token keyword">in</span>     out     <span class="token function">source</span>               destination
    0     0 ACCEPT     all  --  *      *       10.0.0.1             0.0.0.0/0

Chain FORWARD <span class="token punctuation">(</span>policy ACCEPT 0 packets, 0 bytes<span class="token punctuation">)</span>
 pkts bytes target     prot opt <span class="token keyword">in</span>     out     <span class="token function">source</span>               destination

Chain OUTPUT <span class="token punctuation">(</span>policy ACCEPT 373 packets, 53029 bytes<span class="token punctuation">)</span>
 pkts bytes target     prot opt <span class="token keyword">in</span>     out     <span class="token function">source</span>               destination

<span class="token comment" spellcheck="true"># 增加iptables规则</span>
<span class="token punctuation">[</span>root@VM-0-16-centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># iptables -t filter -A INPUT -s 10.0.0.1 -j ACCEPT</span>

<span class="token comment" spellcheck="true"># 查看nat规则</span>
<span class="token punctuation">[</span>root@VM-0-16-centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># iptables -t nat -vnL</span>
Chain PREROUTING <span class="token punctuation">(</span>policy ACCEPT 0 packets, 0 bytes<span class="token punctuation">)</span>
 pkts bytes target     prot opt <span class="token keyword">in</span>     out     <span class="token function">source</span>               destination

Chain INPUT <span class="token punctuation">(</span>policy ACCEPT 0 packets, 0 bytes<span class="token punctuation">)</span>
 pkts bytes target     prot opt <span class="token keyword">in</span>     out     <span class="token function">source</span>               destination

Chain OUTPUT <span class="token punctuation">(</span>policy ACCEPT 0 packets, 0 bytes<span class="token punctuation">)</span>
 pkts bytes target     prot opt <span class="token keyword">in</span>     out     <span class="token function">source</span>               destination

Chain POSTROUTING <span class="token punctuation">(</span>policy ACCEPT 0 packets, 0 bytes<span class="token punctuation">)</span>
 pkts bytes target     prot opt <span class="token keyword">in</span>     out     <span class="token function">source</span>               destination
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="iptables过滤规则的使用"><a href="#iptables过滤规则的使用" class="headerlink" title="iptables过滤规则的使用"></a>iptables过滤规则的使用</h4><p>规则是有顺序的，会按照顺序匹配，顺序在前的会生效</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># -I 会在最前面插入，-A 会在尾部追加</span>
iptables -I INPUT -s 10.0.0.3 -j DROP

<span class="token comment" spellcheck="true"># 下面默认规则都是ACCEPT，如果没有匹配到我们指定的规则，最后就会匹配默认规则</span>
<span class="token punctuation">[</span>root@VM-0-16-centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># iptables -nvL</span>
Chain INPUT <span class="token punctuation">(</span>policy ACCEPT 16 packets, 1704 bytes<span class="token punctuation">)</span>
 pkts bytes target     prot opt <span class="token keyword">in</span>     out     <span class="token function">source</span>               destination
    0     0 DROP       all  --  *      *       10.0.0.3             0.0.0.0/0
    0     0 ACCEPT     all  --  *      *       10.0.0.1             0.0.0.0/0
    0     0 ACCEPT     all  --  *      *       10.0.0.2             0.0.0.0/0

Chain FORWARD <span class="token punctuation">(</span>policy ACCEPT 0 packets, 0 bytes<span class="token punctuation">)</span>
 pkts bytes target     prot opt <span class="token keyword">in</span>     out     <span class="token function">source</span>               destination

Chain OUTPUT <span class="token punctuation">(</span>policy ACCEPT 14 packets, 2986 bytes<span class="token punctuation">)</span>
 pkts bytes target     prot opt <span class="token keyword">in</span>     out     <span class="token function">source</span>               destination

 <span class="token comment" spellcheck="true"># 修改默认规则，input 为拒绝所有ipl连接</span>
 iptables -P INPUT DROP

 <span class="token comment" spellcheck="true"># 清空所有自定义规则，不会修改默认规则</span>
 iptables -F

 <span class="token comment" spellcheck="true"># 清空某个规则</span>
 iptables -D 序列号

 <span class="token comment" spellcheck="true"># 多个规则</span>
iptables -t filter -A INPUT -i eth0 -s 10.0.0.2 -p tcp --dport 80 -j ACCEPT<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="iptables-nat表使用"><a href="#iptables-nat表使用" class="headerlink" title="iptables nat表使用"></a>iptables nat表使用</h4><p>iptables -t nat 命令 规则链 规则</p>
<ul>
<li>PREROUTING 目的地址转换</li>
<li>POSTROUTING 源地址转换</li>
</ul>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 修改目的地址，转发到10.0.0.1上</span>
iptables -t nat -A PREROUTING -i eth0 -d 114.115.116.117 -p tcp -dport 80 -j DNAT --to-destination 10.0.0.1

<span class="token comment" spellcheck="true"># 修改源地址，将内网ip都改为出口IP地址</span>
iptables -t nat -A POSTROUTING -s 10.0.0.0/24 -o eth1 -j SNAT --to-source 111.112.113.114<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>iptables 自定义的规则默认是存在内存中的，需要持久化</p>
<p>可以直接在/etc/sysconfig/iptables中写数据，也可以下载工具将内存中的数据写到文件中<code>yum install iptables-services</code></p>
<h4 id="firewallD"><a href="#firewallD" class="headerlink" title="firewallD"></a>firewallD</h4><p>firewallD的特点</p>
<ul>
<li>支持区域“zone”的概念，类似于iptables中的规则链</li>
<li>firewall-cmd</li>
</ul>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 启动firewalld，iptables和firewalld只能运行一个</span>
<span class="token punctuation">[</span>xx@VM-0-16-centos ~<span class="token punctuation">]</span>$ systemctl status firewalld.service
● firewalld.service - firewalld - dynamic firewall daemon
   Loaded: loaded <span class="token punctuation">(</span>/usr/lib/systemd/system/firewalld.service<span class="token punctuation">;</span> disabled<span class="token punctuation">;</span> vendor preset: enabled<span class="token punctuation">)</span>
   Active: inactive <span class="token punctuation">(</span>dead<span class="token punctuation">)</span>
     Docs: man:firewalld<span class="token punctuation">(</span>1<span class="token punctuation">)</span>
<span class="token punctuation">[</span>xx@VM-0-16-centos ~<span class="token punctuation">]</span>$ systemctl start firewalld.service
<span class="token operator">==</span><span class="token operator">==</span> AUTHENTICATING FOR org.freedesktop.systemd1.manage-units <span class="token operator">==</span><span class="token operator">=</span>
Authentication is required to manage system services or units.
Authenticating as: root
Password:
<span class="token operator">==</span><span class="token operator">==</span> AUTHENTICATION COMPLETE <span class="token operator">==</span><span class="token operator">=</span>
<span class="token punctuation">[</span>xx@VM-0-16-centos ~<span class="token punctuation">]</span>$ systemctl status firewalld.service
● firewalld.service - firewalld - dynamic firewall daemon
   Loaded: loaded <span class="token punctuation">(</span>/usr/lib/systemd/system/firewalld.service<span class="token punctuation">;</span> disabled<span class="token punctuation">;</span> vendor preset: enabled<span class="token punctuation">)</span>
   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since Mon 2020-11-02 12:19:38 CST<span class="token punctuation">;</span> 4s ago
     Docs: man:firewalld<span class="token punctuation">(</span>1<span class="token punctuation">)</span>
 Main PID: 8308 <span class="token punctuation">(</span>firewalld<span class="token punctuation">)</span>
   CGroup: /system.slice/firewalld.service
           └─8308 /usr/bin/python2 -Es /usr/sbin/firewalld --nofork --nopid
<span class="token punctuation">[</span>xx@VM-0-16-centos ~<span class="token punctuation">]</span>$ iptables -nvL
iptables v1.4.21: can<span class="token string">'t initialize iptables table `filter'</span><span class="token keyword">:</span> Permission denied <span class="token punctuation">(</span>you must be root<span class="token punctuation">)</span>
Perhaps iptables or your kernel needs to be upgraded.

<span class="token comment" spellcheck="true"># 用firewall-cmd命令</span>
<span class="token punctuation">[</span>root@VM-0-16-centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># firewall-cmd --state</span>
running
<span class="token punctuation">[</span>root@VM-0-16-centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># firewall-cmd --list-all</span>
public  <span class="token comment" spellcheck="true"># public是默认的区域，既zone</span>
  target: default
  icmp-block-inversion: no
  interfaces: <span class="token comment" spellcheck="true"># 网卡</span>
  sources:  <span class="token comment" spellcheck="true"># 运行访问的ip</span>
  services: dhcpv6-client <span class="token function">ssh</span> <span class="token comment" spellcheck="true"># 运行访问的服务，如果服务用的是默认端口，则可以替代端口，否则不行</span>
  ports: <span class="token comment" spellcheck="true"># 运行访问的端口</span>
  protocols:
  masquerade: no
  forward-ports:
  source-ports:
  icmp-blocks:
  rich rules:

<span class="token comment" spellcheck="true"># 单独查看每个参数</span>
  <span class="token punctuation">[</span>root@VM-0-16-centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># firewall-cmd --zone=public --list-services</span>
dhcpv6-client <span class="token function">ssh</span>

<span class="token comment" spellcheck="true"># 查看有哪些区域</span>
<span class="token punctuation">[</span>root@VM-0-16-centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># firewall-cmd --get-zones</span>
block dmz drop external home internal public trusted work

<span class="token comment" spellcheck="true"># 查看默认使用的区域</span>
<span class="token punctuation">[</span>root@VM-0-16-centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># firewall-cmd --get-default-zone</span>
public

<span class="token comment" spellcheck="true"># 查看激活的区域</span>
<span class="token punctuation">[</span>root@VM-0-16-centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># firewall-cmd --get-active-zone</span>

<span class="token comment" spellcheck="true"># 添加规则</span>
<span class="token punctuation">[</span>root@VM-0-16-centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># firewall-cmd --add-service=https</span>
success
<span class="token punctuation">[</span>root@VM-0-16-centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># firewall-cmd --add-port=81/tcp</span>
success
<span class="token punctuation">[</span>root@VM-0-16-centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># firewall-cmd --list-all</span>
public
  target: default
  icmp-block-inversion: no
  interfaces:
  sources:
  services: dhcpv6-client https <span class="token function">ssh</span>
  ports: 81/tcp
  protocols:
  masquerade: no
  forward-ports:
  source-ports:
  icmp-blocks:
  rich rules:

<span class="token comment" spellcheck="true"># 持久化到磁盘中, --permanent,用了该命令用--list-all是看不到，需要重新加载</span>
<span class="token punctuation">[</span>root@VM-0-16-centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># firewall-cmd --add-port=82/tcp --permanent</span>
success
<span class="token comment" spellcheck="true"># reload会删除临时的规则</span>
<span class="token punctuation">[</span>root@VM-0-16-centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># firewall-cmd --reload</span>
success
<span class="token punctuation">[</span>root@VM-0-16-centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># firewall-cmd --list-all</span>
public
  target: default
  icmp-block-inversion: no
  interfaces:
  sources:
  services: dhcpv6-client <span class="token function">ssh</span>
  ports: 82/tcp
  protocols:
  masquerade: no
  forward-ports:
  source-ports:
  icmp-blocks:
  rich rules:

<span class="token comment" spellcheck="true"># 删除规则</span>
<span class="token punctuation">[</span>root@VM-0-16-centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># firewall-cmd --remove-service=https</span>
success
<span class="token punctuation">[</span>root@VM-0-16-centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># firewall-cmd --list-all</span>
public
  target: default
  icmp-block-inversion: no
  interfaces:
  sources:
  services: dhcpv6-client <span class="token function">ssh</span>
  ports: 82/tcp
  protocols:
  masquerade: no
  forward-ports:
  source-ports:
  icmp-blocks:
  rich rules:<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="SSH介绍及Telnet明文漏洞"><a href="#SSH介绍及Telnet明文漏洞" class="headerlink" title="SSH介绍及Telnet明文漏洞"></a>SSH介绍及Telnet明文漏洞</h4><p>telenet是明文传输</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 将公钥拷贝到服务器上</span>
ssh-copy-id -i /root/.ssh/id_ras.pub root@/xxx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h4 id="FTP服务器vsftpd介绍与软件包安装"><a href="#FTP服务器vsftpd介绍与软件包安装" class="headerlink" title="FTP服务器vsftpd介绍与软件包安装"></a>FTP服务器vsftpd介绍与软件包安装</h4><p>FTP协议分为两条连接，不同的信息要用不同连接传输</p>
<pre><code>* 命令链路
* 数据链路</code></pre><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 安装</span>
yum <span class="token function">install</span> vsftpd <span class="token function">ftp</span>

<span class="token comment" spellcheck="true"># 启动</span>
systemctl start vsftpd.service

<span class="token comment" spellcheck="true"># 开机自启动</span>
systemctl <span class="token function">enable</span> vsftpd.service

<span class="token comment" spellcheck="true"># 访问，使用ftp账户，则是匿名模式，默认的目录是宿主机的/var/ftp目录。也可以用系统用户，目录则是用户根目录</span>
<span class="token punctuation">[</span>root@VM-0-16-centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># ftp localhost</span>
Trying ::1<span class="token punctuation">..</span>.
Connected to localhost <span class="token punctuation">(</span>::1<span class="token punctuation">)</span>.
220 <span class="token punctuation">(</span>vsFTPd 3.0.2<span class="token punctuation">)</span>
Name <span class="token punctuation">(</span>localhost:root<span class="token punctuation">)</span>: <span class="token function">ftp</span>
331 Please specify the password.
Password:
230 Login successful.
Remote system <span class="token function">type</span> is UNIX.
Using binary mode to transfer files.
ftp<span class="token operator">></span> <span class="token function">ls</span>
229 Entering Extended Passive Mode <span class="token punctuation">(</span><span class="token operator">||</span><span class="token operator">|</span>31008<span class="token operator">|</span><span class="token punctuation">)</span>.
150 Here comes the directory listing.
drwxr-xr-x    2 0        0            4096 Apr 01  2020 pub
226 Directory send OK.

<span class="token comment" spellcheck="true"># 要开启ftp服务让别的主机访问，需要开放端口，最简单的用firewall-cmd --add-service ftp</span>

<span class="token comment" spellcheck="true"># 下载和上传</span>
➜ <span class="token function">ftp</span> 139.155.182.202
Connected to 139.155.182.202.
220 <span class="token punctuation">(</span>vsFTPd 3.0.2<span class="token punctuation">)</span>
Name <span class="token punctuation">(</span>139.155.182.202:qq<span class="token punctuation">)</span>: xx
331 Please specify the password.
Password:
230 Login successful.
ftp<span class="token operator">></span> <span class="token operator">!</span>ls <span class="token comment" spellcheck="true"># ！可以执行本机命令</span>
a.txt        get_product.py    ipv4        main.go        utils
aa.txt        go.mod        ipv6        result.txt    writefile.py
bfile        go.sum        knowledge.py    <span class="token function">test</span>
ftp<span class="token operator">></span> put a.txt <span class="token comment" spellcheck="true"># 上传文件，既在远程主机上写入文件</span>
200 PORT <span class="token function">command</span> successful. Consider using PASV.
150 Ok to send data.
226 Transfer complete.
7500000 bytes sent <span class="token keyword">in</span> 0.926 seconds <span class="token punctuation">(</span>7.72 Mbytes/s<span class="token punctuation">)</span>
ftp<span class="token operator">></span> <span class="token function">ls</span>
200 PORT <span class="token function">command</span> successful. Consider using PASV.
150 Here comes the directory listing.
-rw-r--r--    1 1000     1000      7500000 Nov 02 14:21 a.txt
drwxrwxr-x    2 1000     1000         4096 Nov 02 14:19 <span class="token function">test</span>
226 Directory send OK.
ftp<span class="token operator">></span> get aaaa.txt <span class="token comment" spellcheck="true"># 下载文件，既在本地主机上写入文件</span>
200 PORT <span class="token function">command</span> successful. Consider using PASV.
150 Opening BINARY mode data connection <span class="token keyword">for</span> aaaa.txt <span class="token punctuation">(</span>7 bytes<span class="token punctuation">)</span>.
WARNING<span class="token operator">!</span> 2 bare linefeeds received <span class="token keyword">in</span> ASCII mode
File may not have transferred correctly.
226 Transfer complete.
7 bytes received <span class="token keyword">in</span> 0.000211 seconds <span class="token punctuation">(</span>32.4 kbytes/s<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="samba和NFS服务"><a href="#samba和NFS服务" class="headerlink" title="samba和NFS服务"></a>samba和NFS服务</h4><p>samba服务主要针对于windows系统</p>
<p>NFS主要针对的的是linux系统</p>
<h4 id="Nginx基本配置文件"><a href="#Nginx基本配置文件" class="headerlink" title="Nginx基本配置文件"></a>Nginx基本配置文件</h4><p>OpenResty® 是一个基于 Nginx 与 Lua 的高性能 Web 平台，其内部集成了大量精良的 Lua 库、第三方模块以及大多数的依赖项。用于方便地搭建能够处理超高并发、扩展性极高的动态 Web 应用、Web 服务和动态网关。</p>
<p>OpenResty® 通过汇聚各种设计精良的 Nginx 模块（主要由 OpenResty 团队自主开发），从而将 Nginx  有效地变成一个强大的通用 Web 应用平台。这样，Web 开发人员和系统工程师可以使用 Lua 脚本语言调动 Nginx 支持的各种 C 以及  Lua 模块，快速构造出足以胜任 10K 乃至 1000K 以上单机并发连接的高性能 Web 应用系统。</p>
<p>OpenResty® 的目标是让你的Web服务直接跑在 Nginx 服务内部，充分利用 Nginx 的非阻塞 I/O 模型，不仅仅对  HTTP 客户端请求,甚至于对远程后端诸如 MySQL、PostgreSQL、Memcached 以及 Redis  等都进行一致的高性能响应。来自<a href="http://openresty.org/cn/" target="_blank" rel="noopener">OpenResty®官网</a></p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 下载</span>
yum-config-manager --add-repo https://openresty.org/package/centos/openresty.repo
yum <span class="token function">install</span> openresty

<span class="token comment" spellcheck="true"># 配置文件</span>
/usr/local/openresty/nginx/conf/nginx.conf

<span class="token comment" spellcheck="true"># 启动</span>
<span class="token function">service</span> openresty start<span class="token operator">|</span>stop<span class="token operator">|</span>restart<span class="token operator">|</span>reload<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="LNMP"><a href="#LNMP" class="headerlink" title="LNMP"></a>LNMP</h4><p>LAMP: linux + Apache + MySQL + PHP</p>
<p>LNMP: linux + Nginx + MySQL + PHP </p>
<p></p>

            </div>
            <hr />

            
            <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.88rem;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-large waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fa fa-close"></i></a>
            <h4 class="reward-title">写作不易，客官能否打赏一杯咖啡？</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.png" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            

            <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>

            

    <div class="reprint" id="reprint-statement">
        <p class="reprint-tip">
            <i class="fa fa-exclamation-triangle"></i>&nbsp;&nbsp;
            <span>转载规则</span>
        </p>
        
            <div class="center-align">
                <a rel="license" href="https://creativecommons.org/licenses/by/4.0/deed.zh">
                    <img alt=""
                         style="border-width:0"
                         src="https://i.creativecommons.org/l/by/4.0/88x31.png"/>
                </a>
            </div>
            <br/>
            <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text"
                  property="dct:title" rel="dct:type">
                    《Linux 学习笔记》
                </span> 由
            <a xmlns:cc="http://creativecommons.org/ns#" href="/2020/09/05/linux-bi-ji/" property="cc:attributionName"
               rel="cc:attributionURL">
                KaKa
            </a> 采用
            <a rel="license" href="https://creativecommons.org/licenses/by/4.0/deed.zh">
                知识共享署名 4.0 国际许可协议
            </a>进行许可。
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>


        </div>
    </div>

    

    

    

    

    
    <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments input[type=text],
    #vcomments input[type=email],
    #vcomments input[type=url],
    #vcomments textarea {
        box-sizing: border-box;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #42b983;
        font-weight: 500;
        text-decoration: underline;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div id="vcomments" class="card-content"></div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<!-- <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script> -->

<script>
    new Valine({
        el: '#vcomments',
        appId: '',
        appKey: '',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'false' === 'true',
        avatar: 'wavatar',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: '如果你没有GitHub账号，还可以在这里评论啦！'
    });
</script>

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fa fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2020/11/04/http-bi-ji/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/5.jpg" class="responsive-img" alt="HTTP笔记">
                        
                        <span class="card-title">HTTP笔记</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            《极客时间》HTTP学习笔记
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="fa fa-clock-o fa-fw icon-date"></i>2020-11-04
                        </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/计算机网络/" class="post-category" target="_blank">
                                    计算机网络
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/HTTP/" target="_blank">
                        <span class="chip bg-color">HTTP</span>
                    </a>
                    
                    <a href="/tags/HTTPS/" target="_blank">
                        <span class="chip bg-color">HTTPS</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fa fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2020/09/03/mongo-replice/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/1.jpg" class="responsive-img" alt="MongoDB复制集群搭建">
                        
                        <span class="card-title">MongoDB复制集群搭建</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            搭建一个MongoDB复制集群并理解其中原理
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2020-09-03
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/数据库/" class="post-category" target="_blank">
                                    数据库
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/数据库/" target="_blank">
                        <span class="chip bg-color">数据库</span>
                    </a>
                    
                    <a href="/tags/MongoDB/" target="_blank">
                        <span class="chip bg-color">MongoDB</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>
</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: 鱼丸粗面的博客<br />'
            + '作者: KaKa<br />'
            + '链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () { bodyElement.removeChild(newdiv); }, 200);
    });
</script>

    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fa fa-list"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).slideUp(500);
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).slideDown(500);
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>
    

</main>


<script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\(', '\)']]}
    });
</script>

<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>
<!-- 代码语言 -->
<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>
<!-- 代码块复制 -->
<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>
<script type="text/javascript" src="/libs/codeBlock/clipboard.min.js"></script>
<!-- 代码块收缩 -->
<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script> 
<!-- 代码块折行 -->
<style type="text/css">code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }</style>


    <footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            &copy; 2017-2020 WeiYang. 版权所有

            
            &nbsp;<i class="fa fa-area-chart"></i>&nbsp;站点总字数:&nbsp;
            <span class="white-color">41.1k</span>
            

            <br>
            <span id="sitetime"></span>

            
            
        </div>
        <div class="col s12 m4 l4 social-link ">
    <a href="https://github.com/LaoBan-ywcm" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:qiuqiandfqr@gmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fa fa-rss"></i>
    </a>
</div>
    </div>
</footer>

<div class="progress-bar"></div>

<!-- 不蒜子计数初始值纠正 -->
<script>
    // $(document).ready(function () {

    //     var int = setInterval(fixCount, 50);
    //     var pvcountOffset = 80000;
    //     var uvcountOffset = 20000;

    //     function fixCount() {
    //         if (document.getElementById("busuanzi_container_site_pv").style.display != "none") {
    //             $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + pvcountOffset);
    //             clearInterval(int);
    //         }
    //         if ($("#busuanzi_container_site_pv").css("display") != "none") {
    //             $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + uvcountOffset); // 加上初始数据 
    //             clearInterval(int);
    //         }
    //     }
    // });
</script>

<script language=javascript>
    function siteTime() {
        window.setTimeout("siteTime()", 1000);
        var seconds = 1000;
        var minutes = seconds * 60;
        var hours = minutes * 60;
        var days = hours * 24;
        var years = days * 365;
        var today = new Date();
        var todayYear = today.getFullYear();
        var todayMonth = today.getMonth() + 1;
        var todayDate = today.getDate();
        var todayHour = today.getHours();
        var todayMinute = today.getMinutes();
        var todaySecond = today.getSeconds();
        /* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
        year - 作为date对象的年份，为4位年份值
        month - 0-11之间的整数，做为date对象的月份
        day - 1-31之间的整数，做为date对象的天数
        hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
        minutes - 0-59之间的整数，做为date对象的分钟数
        seconds - 0-59之间的整数，做为date对象的秒数
        microseconds - 0-999之间的整数，做为date对象的毫秒数 */
        var t1 = Date.UTC(2017, 09, 11, 00, 00, 00); //北京时间2018-2-13 00:00:00
        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
        var diff = t2 - t1;
        var diffYears = Math.floor(diff / years);
        var diffDays = Math.floor((diff / days) - diffYears * 365);
        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes);
        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds);
        document.getElementById("sitetime").innerHTML = "本站已运行 " + diffYears + " 年 " + diffDays + " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
    }/*因为建站时间还没有一年，就将之注释掉了。需要的可以取消*/
    siteTime();
</script>

    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <script type="text/javascript"> var OriginTitile = document.title, st; document.addEventListener("visibilitychange", function () { document.hidden ? (document.title = "Σ(っ °Д °;)っ喔哟，崩溃啦！", clearTimeout(st)) : (document.title = "φ(゜▽゜*)♪咦，又好了！", st = setTimeout(function () { document.title = OriginTitile }, 3e3)) })
    </script>

    <!-- Global site tag (gtag.js) - Google Analytics -->



    
    <script src="/libs/others/clicklove.js"></script>
    

    

    <!-- 雪花特效 -->
    

</body>

</html>